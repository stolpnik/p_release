var templates={};templates.page=new Hogan.Template(function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="p">'),d.b("\n"+c),d.b(d.t(d.f("title",a,b,0))),d.b("\n"+c),d.s(d.f("pages",a,b,1),a,b,0,36,192,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div id="'),d.b(d.v(d.f("pageId",a,b,0))),d.b('" class="page" data-page-num="'),d.b(d.v(d.f("pageNum",a,b,0))),d.b('" data-original-zindex="'),d.b(d.v(d.f("zIndex",a,b,0))),d.b('" style="z-index:'),d.b(d.v(d.f("zIndex",a,b,0))),d.b(';">'),d.b("\n"+c),d.b("			"),d.b(d.t(d.f("pageHtml",a,b,0))),d.b("\n"+c),d.b("		</div>"),d.b("\n")}),a.pop()),d.b('<div id="page-no">'),d.b("\n"+c),d.b('<div id="current-page">1</div>/<div id="total-pages">'),d.b(d.v(d.f("totalPages",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b('<div id="info">'),d.b("\n"+c),d.b("<ul>"),d.b("\n"+c),d.b("<li>→:go next</li>"),d.b("\n"+c),d.b("<li>←:go back</li>"),d.b("\n"+c),d.b("<li>↑:go first</li>"),d.b("\n"+c),d.b("<li>↓:go last</li>"),d.b("\n"+c),d.b("</ul>"),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b("</div>"),d.fl()}),function(a){var b,c,d,e=function(a,b){return function(){return a.apply(b,arguments)}};d=null,c=null,b=function(){function b(a,b){a==null&&(a="body"),b==null&&(b=d),this.pageMoveWithSwipe=e(this.pageMoveWithSwipe,this),this.pageMove=e(this.pageMove,this),this.data="",this.title="",this.pages=[],this.renderer=new b(a)}return b.SPLIT_STR="|||||",b.LEFT=37,b.UP=38,b.RIGHT=39,b.DOWN=40,b.IDLE=0,b.FIRED=1,b.prototype.data=null,b.prototype.title=null,b.prototype.pages=null,b.prototype.renderer=null,b.prototype.lastPage=1,b.prototype.currentPage=1,b.prototype.totalPages=0,b.prototype.keyState=b.IDLE,b.prototype.init=function(b){var c,d;return b==null&&(b="p.md"),d=this,c=a.Deferred(),a.when(this.load(b)).done(function(a){return d.addPages(d.parse(a)),d.setup(),c.resolve()}).fail(function(a){throw a}),c.promise()},b.prototype.load=function(b){var c;return b==null&&(b="p.md"),c=a.get(b),a.when(c).done(function(a){return this.data=a}).fail(function(a){throw a}),c},b.prototype.parse=function(a){var b;return b=new Showdown.converter,b.makeHtml(a)},b.prototype.addPages=function(a){var c,d,e,f,g,h,i,j,k;h=/(<h1.+"?>.+<\/h1>)/,g=a.match(h),g[0]!=null&&(this.title=g[0]),a=a.replace(h,""),e=a.match(/(<h2.+"?>.+<\/h2>)/g),a=a.replace(/(<h2.+"?>.+<\/h2>)/g,b.SPLIT_STR),d=a.split(b.SPLIT_STR),d.shift(),this.totalPages=e.length,k=[];for(c=i=0,j=e.length;i<j;c=++i)f=e[c],k.push(this.pages.push(""+f+"\n"+d[c]));return k},b.prototype.setup=function(){var c=this;return this.renderer.render(this),a(document).keydown(this.pageMove),a(document).keyup(function(a){return c.keyState=b.IDLE}),a(window).swipe({swipe:this.pageMoveWithSwipe}),a(window).resize(this.renderer.resize),this.restoreFromUrl()},b.prototype.show=function(a){var b;return a==null&&(a=1),this.lastPage=this.currentPage,this.currentPage=a,b=this.pages[a-1],this.renderer.showPage(a,this.lastPage),location.hash="#"+a,b},b.prototype.pageMove=function(a){if(this.keyState===b.FIRED)return;switch(a.keyCode){case b.RIGHT:return this.next(),this.keyState=b.FIRED;case b.LEFT:return this.prev(),this.keyState=b.FIRED;case b.UP:return this.show(1),this.keyState=b.FIRED;case b.DOWN:return this.show(this.totalPages),this.keyState=b.FIRED}},b.prototype.restoreFromUrl=function(){var a;a=location.hash.match(/#(\d+)/);if((a!=null?a.length:void 0)>1)return this.show(parseInt(a[1],10))},b.prototype.pageMoveWithSwipe=function(a,b,c,d,e){switch(b){case"right":return this.next();case"left":return this.prev();case"up":return this.show(1);case"down":return this.show(this.totalPages)}},b.prototype.next=function(){var a;return a=this.currentPage===this.totalPages?1:this.currentPage+1,this.show(a)},b.prototype.prev=function(){var a;return a=this.currentPage===1?this.totalPages:this.currentPage-1,this.show(a)},b}(),typeof define!="undefined"&&define!==null?define(["s","r"],function(a,e){return d=a,c=e,{P:b,S:d,R:c}}):(this.p||(this.p={}),this.p.P=b,d=this.p.S);var d;d=function(){function b(b){this.target=a(b)}return b.prototype.render=function(b){var c,d;return this.container=a(templates.page.render({title:b.title,totalPages:b.totalPages,pages:function(){var a,e,f,g;f=b.pages,g=[];for(c=a=0,e=f.length;a<e;c=++a)d=f[c],g.push({pageNum:c+1,pageId:"page-"+(c+1),zIndex:b.totalPages-c,pageHtml:d});return g}()})),this.target.append(this.container),a("div.page",this.container).hide(),a("div#page-1",this.container).show(),a("#p").on("webkitAnimationStart","div.page",function(){}),a("#p").on("webkitAnimationEnd","div.page",function(){}),this.resize(),a("h1",this.target).click(function(){if(document.body.webkitRequestFullScreen!=null)return document.body.webkitRequestFullScreen()})},b.prototype.resize=function(b){var c,d;return d=a("div.page",this.container),c=a(window).height(),d.css({top:(c-d.height())*.5})},b.prototype.showPage=function(b,c){return c!=null&&a("#page-"+c).hide(),a("#page-"+b).show(),a("#current-page").text(b)},b}(),typeof define!="undefined"&&define!==null?define(function(){return d}):(this.p||(this.p={}),this.p.S=d)}(jQuery);